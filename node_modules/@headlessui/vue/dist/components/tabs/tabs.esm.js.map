{"version":3,"file":"tabs.esm.js","sources":["../../../src/components/tabs/tabs.ts"],"sourcesContent":["import {\n  defineComponent,\n  ref,\n  provide,\n  inject,\n  onMounted,\n  onUnmounted,\n  computed,\n  InjectionKey,\n  Ref,\n  watchEffect,\n} from 'vue'\n\nimport { Features, render, omit } from '../../utils/render'\nimport { useId } from '../../hooks/use-id'\nimport { Keys } from '../../keyboard'\nimport { dom } from '../../utils/dom'\nimport { match } from '../../utils/match'\nimport { focusIn, Focus } from '../../utils/focus-management'\nimport { useResolveButtonType } from '../../hooks/use-resolve-button-type'\n\ntype StateDefinition = {\n  // State\n  selectedIndex: Ref<number | null>\n  orientation: Ref<'vertical' | 'horizontal'>\n  activation: Ref<'auto' | 'manual'>\n\n  tabs: Ref<Ref<HTMLElement | null>[]>\n  panels: Ref<Ref<HTMLElement | null>[]>\n\n  // State mutators\n  setSelectedIndex(index: number): void\n  registerTab(tab: Ref<HTMLElement | null>): void\n  unregisterTab(tab: Ref<HTMLElement | null>): void\n  registerPanel(panel: Ref<HTMLElement | null>): void\n  unregisterPanel(panel: Ref<HTMLElement | null>): void\n}\n\nlet TabsContext = Symbol('TabsContext') as InjectionKey<StateDefinition>\n\nfunction useTabsContext(component: string) {\n  let context = inject(TabsContext, null)\n\n  if (context === null) {\n    let err = new Error(`<${component} /> is missing a parent <TabGroup /> component.`)\n    if (Error.captureStackTrace) Error.captureStackTrace(err, useTabsContext)\n    throw err\n  }\n\n  return context\n}\n\n// ---\n\nexport let TabGroup = defineComponent({\n  name: 'TabGroup',\n  emits: {\n    change: (_index: number) => true,\n  },\n  props: {\n    as: { type: [Object, String], default: 'template' },\n    selectedIndex: { type: [Number], default: null },\n    defaultIndex: { type: [Number], default: 0 },\n    vertical: { type: [Boolean], default: false },\n    manual: { type: [Boolean], default: false },\n  },\n  setup(props, { slots, attrs, emit }) {\n    let selectedIndex = ref<StateDefinition['selectedIndex']['value']>(null)\n    let tabs = ref<StateDefinition['tabs']['value']>([])\n    let panels = ref<StateDefinition['panels']['value']>([])\n\n    let api = {\n      selectedIndex,\n      orientation: computed(() => (props.vertical ? 'vertical' : 'horizontal')),\n      activation: computed(() => (props.manual ? 'manual' : 'auto')),\n      tabs,\n      panels,\n      setSelectedIndex(index: number) {\n        if (selectedIndex.value === index) return\n        selectedIndex.value = index\n        emit('change', index)\n      },\n      registerTab(tab: typeof tabs['value'][number]) {\n        if (!tabs.value.includes(tab)) tabs.value.push(tab)\n      },\n      unregisterTab(tab: typeof tabs['value'][number]) {\n        let idx = tabs.value.indexOf(tab)\n        if (idx !== -1) tabs.value.splice(idx, 1)\n      },\n      registerPanel(panel: typeof panels['value'][number]) {\n        if (!panels.value.includes(panel)) panels.value.push(panel)\n      },\n      unregisterPanel(panel: typeof panels['value'][number]) {\n        let idx = panels.value.indexOf(panel)\n        if (idx !== -1) panels.value.splice(idx, 1)\n      },\n    }\n\n    provide(TabsContext, api)\n\n    watchEffect(() => {\n      if (api.tabs.value.length <= 0) return\n      if (props.selectedIndex === null && selectedIndex.value !== null) return\n\n      let tabs = api.tabs.value.map(tab => dom(tab)).filter(Boolean) as HTMLElement[]\n      let focusableTabs = tabs.filter(tab => !tab.hasAttribute('disabled'))\n\n      let indexToSet = props.selectedIndex ?? props.defaultIndex\n\n      // Underflow\n      if (indexToSet < 0) {\n        selectedIndex.value = tabs.indexOf(focusableTabs[0])\n      }\n\n      // Overflow\n      else if (indexToSet > api.tabs.value.length) {\n        selectedIndex.value = tabs.indexOf(focusableTabs[focusableTabs.length - 1])\n      }\n\n      // Middle\n      else {\n        let before = tabs.slice(0, indexToSet)\n        let after = tabs.slice(indexToSet)\n\n        let next = [...after, ...before].find(tab => focusableTabs.includes(tab))\n        if (!next) return\n\n        selectedIndex.value = tabs.indexOf(next)\n      }\n    })\n\n    return () => {\n      let slot = { selectedIndex: selectedIndex.value }\n\n      return render({\n        props: omit(props, ['selectedIndex', 'defaultIndex', 'manual', 'vertical', 'onChange']),\n        slot,\n        slots,\n        attrs,\n        name: 'TabGroup',\n      })\n    }\n  },\n})\n\n// ---\n\nexport let TabList = defineComponent({\n  name: 'TabList',\n  props: {\n    as: { type: [Object, String], default: 'div' },\n  },\n  setup(props, { attrs, slots }) {\n    let api = useTabsContext('TabList')\n\n    return () => {\n      let slot = { selectedIndex: api.selectedIndex.value }\n\n      let propsWeControl = {\n        role: 'tablist',\n        'aria-orientation': api.orientation.value,\n      }\n      let passThroughProps = props\n\n      return render({\n        props: { ...passThroughProps, ...propsWeControl },\n        slot,\n        attrs,\n        slots,\n        name: 'TabList',\n      })\n    }\n  },\n})\n\n// ---\n\nexport let Tab = defineComponent({\n  name: 'Tab',\n  props: {\n    as: { type: [Object, String], default: 'button' },\n    disabled: { type: [Boolean], default: false },\n  },\n  render() {\n    let api = useTabsContext('Tab')\n\n    let slot = { selected: this.selected }\n    let propsWeControl = {\n      ref: 'el',\n      onKeydown: this.handleKeyDown,\n      onFocus: api.activation.value === 'manual' ? this.handleFocus : this.handleSelection,\n      onClick: this.handleSelection,\n      id: this.id,\n      role: 'tab',\n      type: this.type,\n      'aria-controls': api.panels.value[this.myIndex]?.value?.id,\n      'aria-selected': this.selected,\n      tabIndex: this.selected ? 0 : -1,\n      disabled: this.$props.disabled ? true : undefined,\n    }\n\n    return render({\n      props: { ...this.$props, ...propsWeControl },\n      slot,\n      attrs: this.$attrs,\n      slots: this.$slots,\n      name: 'Tab',\n    })\n  },\n  setup(props, { attrs }) {\n    let api = useTabsContext('Tab')\n    let id = `headlessui-tabs-tab-${useId()}`\n\n    let tabRef = ref()\n\n    onMounted(() => api.registerTab(tabRef))\n    onUnmounted(() => api.unregisterTab(tabRef))\n\n    let myIndex = computed(() => api.tabs.value.indexOf(tabRef))\n    let selected = computed(() => myIndex.value === api.selectedIndex.value)\n\n    function handleKeyDown(event: KeyboardEvent) {\n      let list = api.tabs.value.map(tab => dom(tab)).filter(Boolean) as HTMLElement[]\n\n      if (event.key === Keys.Space || event.key === Keys.Enter) {\n        event.preventDefault()\n        event.stopPropagation()\n\n        api.setSelectedIndex(myIndex.value)\n        return\n      }\n\n      switch (event.key) {\n        case Keys.Home:\n        case Keys.PageUp:\n          event.preventDefault()\n          event.stopPropagation()\n\n          return focusIn(list, Focus.First)\n\n        case Keys.End:\n        case Keys.PageDown:\n          event.preventDefault()\n          event.stopPropagation()\n\n          return focusIn(list, Focus.Last)\n      }\n\n      return match(api.orientation.value, {\n        vertical() {\n          if (event.key === Keys.ArrowUp) return focusIn(list, Focus.Previous | Focus.WrapAround)\n          if (event.key === Keys.ArrowDown) return focusIn(list, Focus.Next | Focus.WrapAround)\n          return\n        },\n        horizontal() {\n          if (event.key === Keys.ArrowLeft) return focusIn(list, Focus.Previous | Focus.WrapAround)\n          if (event.key === Keys.ArrowRight) return focusIn(list, Focus.Next | Focus.WrapAround)\n          return\n        },\n      })\n    }\n\n    function handleFocus() {\n      dom(tabRef)?.focus()\n    }\n\n    function handleSelection() {\n      if (props.disabled) return\n\n      dom(tabRef)?.focus()\n      api.setSelectedIndex(myIndex.value)\n    }\n\n    return {\n      el: tabRef,\n      id,\n      selected,\n      myIndex,\n      type: useResolveButtonType(\n        computed(() => ({ as: props.as, type: attrs.type })),\n        tabRef\n      ),\n      handleKeyDown,\n      handleFocus,\n      handleSelection,\n    }\n  },\n})\n\n// ---\n\nexport let TabPanels = defineComponent({\n  name: 'TabPanels',\n  props: {\n    as: { type: [Object, String], default: 'div' },\n  },\n  setup(props, { slots, attrs }) {\n    let api = useTabsContext('TabPanels')\n\n    return () => {\n      let slot = { selectedIndex: api.selectedIndex.value }\n\n      return render({\n        props,\n        slot,\n        attrs,\n        slots,\n        name: 'TabPanels',\n      })\n    }\n  },\n})\n\nexport let TabPanel = defineComponent({\n  name: 'TabPanel',\n  props: {\n    as: { type: [Object, String], default: 'div' },\n    static: { type: Boolean, default: false },\n    unmount: { type: Boolean, default: true },\n  },\n  render() {\n    let api = useTabsContext('TabPanel')\n\n    let slot = { selected: this.selected }\n    let propsWeControl = {\n      ref: 'el',\n      id: this.id,\n      role: 'tabpanel',\n      'aria-labelledby': api.tabs.value[this.myIndex]?.value?.id,\n      tabIndex: this.selected ? 0 : -1,\n    }\n\n    return render({\n      props: { ...this.$props, ...propsWeControl },\n      slot,\n      attrs: this.$attrs,\n      slots: this.$slots,\n      features: Features.Static | Features.RenderStrategy,\n      visible: this.selected,\n      name: 'TabPanel',\n    })\n  },\n  setup() {\n    let api = useTabsContext('TabPanel')\n    let id = `headlessui-tabs-panel-${useId()}`\n\n    let panelRef = ref()\n\n    onMounted(() => api.registerPanel(panelRef))\n    onUnmounted(() => api.unregisterPanel(panelRef))\n\n    let myIndex = computed(() => api.panels.value.indexOf(panelRef))\n    let selected = computed(() => myIndex.value === api.selectedIndex.value)\n\n    return { id, el: panelRef, selected, myIndex }\n  },\n})\n"],"names":["TabsContext","Symbol","useTabsContext","component","context","inject","err","Error","captureStackTrace","TabGroup","defineComponent","name","emits","change","_index","props","as","type","Object","String","selectedIndex","Number","defaultIndex","vertical","Boolean","manual","setup","slots","attrs","emit","ref","tabs","panels","api","orientation","computed","activation","setSelectedIndex","index","value","registerTab","tab","includes","push","unregisterTab","idx","indexOf","splice","registerPanel","panel","unregisterPanel","provide","watchEffect","length","map","dom","filter","focusableTabs","hasAttribute","indexToSet","before","slice","after","next","find","slot","render","omit","TabList","propsWeControl","role","passThroughProps","Tab","disabled","selected","onKeydown","handleKeyDown","onFocus","handleFocus","handleSelection","onClick","id","myIndex","tabIndex","$props","undefined","$attrs","$slots","useId","tabRef","onMounted","onUnmounted","event","list","key","Keys","Space","Enter","preventDefault","stopPropagation","Home","PageUp","focusIn","Focus","First","End","PageDown","Last","match","ArrowUp","Previous","WrapAround","ArrowDown","Next","horizontal","ArrowLeft","ArrowRight","focus","el","useResolveButtonType","TabPanels","TabPanel","unmount","features","Features","Static","RenderStrategy","visible","panelRef"],"mappings":"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"}